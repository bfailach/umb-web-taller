<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gestor de tareas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 2rem;
        }
        #tareas {
            margin-top: 1rem;
        }
        li {
            padding: 0.5rem 0;
            border-bottom: 1px solid #ddd;
        }
    </style>
</head>
<body>

<h1>Gestor de tareas</h1>

<form id="form-tarea">
    <input type="text" id="titulo" placeholder="Nueva tarea..." required>
    <button type="submit">Crear</button>
</form>

<ul id="tareas"></ul>

<script>
    const API_URL = "https://umb-web-taller-n3ty.onrender.com/";

    async function cargarTareas() {
        try {
            const res = await fetch(API_URL);
            const tareas = await res.json();

            const lista = document.getElementById("tareas");
            lista.innerHTML = tareas.map(t => `<li>${t.titulo}</li>`).join("");
        } catch (error) {
            console.error("Error cargando tareas:", error);
        }
    }

    document.getElementById("form-tarea").addEventListener("submit", async (e) => {
        e.preventDefault();

        const titulo = document.getElementById("titulo").value.trim();
        if (!titulo) return;

        await fetch(API_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ titulo })
        });

        document.getElementById("titulo").value = "";
        cargarTareas();
    });

    cargarTareas();
</script>

</body>
</html>
